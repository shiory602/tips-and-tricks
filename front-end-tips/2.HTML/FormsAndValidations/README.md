# フォームとフォーム部品のHTMLタグについて学ぶ

## フォーム
> **フォーム**とは入力欄や送信ボタンの集まりのこと。
> フォームを使うと、名前やプロフィール文、性別などなどブラウザで入力された値をまとめてサーバーへ送ることができる。

- ブロック要素である
- formの入れ子（ネスト）は禁じられている

### 基本構造
```html
<form action= "送信先URL" id="form">
    <div>
        <label>
            Name: 
            <input type="text" name="name">
        </label>
    </div>
    <div>
        <label>
            Birthday: 
            <input type="date" name="birth">
        </label>
    </div>
    <button type="submit">Submit</button>
</form>
```
警告: フォームの中にフォームを入れ子にすることは厳格に禁じられており、予期せぬ動作を発生するおそれがある。


### フォームの属性
> ひとつひとつの入力欄にはname属性で名前をつける
> 送信したときに**どの値が、どの入力欄に対応しているのか**サーバー側が分かるようにする。

- action: フォームデータの送信先。指定されなかった場合、現在のページのURLが送信先になる。

- autocomplete（HTML5）: **on(デフォルト)**を指定した場合、フォーム内のinput要素でオートコンプリート(Webブラウザによる入力候補及び自動補完)が有効になる。**off**を指定した場合、フォーム内のinput要素でオートコンプリートが無効になる。Webブラウザによっては、この指定が無視されることがある。

- method: データをどのように送るかを指定。

| 値 | 意味 |
| --- | --- |
| GET | 送信するデータが URL 中に埋め込まれる。（規定値） |
| POST | 送信するデータが URL とは別に送られる。 |


- enctype: ファイルを送るときのデータ形式**MIMEタイプ**を指定。画像や動画などのファイルを送るときには`enctype="multipart/form-data"`を指定する。

| 属性値 | 意味 |
| --- | --- |
| application/x-www-form-urlencoded | エンコード（変換）された状態で送信。（規定値） |
| multipart/form-data | 添付ファイルとして送信。フォームでファイルを送信する場合に指定。 |
| text/plain | プレーンテキストで送信。フォームの内容をメールで送信する場合に指定。 |

- name: スクリプティングで使用するためのフォーム名

- onsubmit: Submitボタンを押したときに実行するスクリプトを記述。

- onreset: Resetボタンを押したときに実行するスクリプトを記述。

- target: リンク先のページを開くときに現在のウィンドウを使うか、新しいウィンドウを開くかを指定。省略した場合は、現在のウィンドウを使う。

| 属性値 | 意味 |
| --- | --- |
| _blank | 新しいウィンドウを開く |
| _self | 現在のウィンドウを使う |
| 名前 | 指定した名前のフレームを使う |
| _top | フレーム分割している場合、フレームを解除して現在のウィンドウを使う |



## <label> 要素
`<label>`は1つ1つの入力欄とひも付ける。


1. `<label for="ここ">`と`<input id="ここ">`を合わせる
```html
<label for="name">Name:</label> <input type="text" id="name" name="user_name">
```

2. `<label>~</label>`の中に`<input>`を入れることでひも付け
```html
<label for="name">
  Name: <input type="text" id="name" name="user_name">
</label>
```

- 複数のラベル
1 つのウィジェット内に複数のラベルを入れるはできる。
アクセシブルなフォームを作成するには1つの `<label>` 要素内にウィジェットを入れ子にする。

### ラベルの属性

- accesskey: 文字
- for: 関連付けるフォーム部品の ID を指定します。
- onblur: スクリプト
- onfocus: スクリプト


## その他の要素タグ

### fieldsetタグ
- スタイルや意味付けのために、同じ目的を持つウィジェットをグループ化する。
- `<fieldset>`タグのすぐ下に`<legend>`要素を入れてラベルを付与できる。

### legendタグ
- `<fieldset>`要素の目的を説明する。

### inputタグ
サーバーには、inputタグの**name属性**に設定した値と、入力された(選択された)値が一組として送信される。
- テキストボックス（１行のみ） -> *text*
- ラジオボタン -> *radio*
- チェックボックス -> *checkbox*
- 隠しデータ -> hidden
- ファイルのアップロード -> *file*

### textareaタグ
- タグは複数行の入力欄を設置する

### buttonタグ
- `<button type="submit">`: クリックでフォームが送信される。
- `<button type="reset">`: クリックでフォームの内容がリセットされる。
- `<button type="button">`: クリックしてもフォームは送信されない。JavaScriptの処理を実行したいときに使う。


***




# `<form action="..." method="...">`について
> htmlでメールフォームを作るには、formタグを使う。
> formタグには**action属性**と**method属性**の指定が必要。



## action属性
- フォームの送信ボタンを押して送信されるデータの送信先を指定
```html
<form action="フォーム経由で送信された情報を処理するプログラムのURI">
</form>
```

## method属性
- 送信するときの転送方法を指定
- postとgetがある

### method属性 get
- データを取得するときに使用
- 入力したフォーム内容のデータがURIにくっついて送信される
※日本語で入力すると特殊なコードに変換されて文字化けするので、アルファベットで検索した方がわかりやすい。
```html
<form action="フォーム経由で送信された情報を処理するプログラムの URI" method="get">
</form>
```


### method属性 post
- データを書き込む（保存する）時に使用
- 入力したフォーム内容はURIとは別の場所に保管されてデータが送信される
- 入力したフォーム内容のデータは外側からの表示では見ることができないので安全性が高い
```html
<form action="フォーム経由で送信された情報を処理するプログラムの URI" method="post">
</form>
```

## getとpostの違い
- getには送信するデータ量の制限がある
- getは送信したデータ内容が送信先のサーバーにログとして残ってしまうことがある
- postには送信するデータ量の制限がない
- getはサーバー側にあるデータの取得に適している
- postはユーザー側が情報を送信するのに適している







***


# フォームデータの検証（バリデーション）

> ブラウザには、フォームを送信するときに「データが正しい形式になっているか」をチェックしてくれる機能が備わっている。
> このことを**バリデーション**という。

(例)

1. 入力必須
`<input>`タグや`<textarea>`タグに**required属性**を指定すると、その入力欄は入力必須になる。
空欄のままフォームを送信すると、エラーを表示する。

2. テキスト形式
メールアドレスの入力欄`<input type="email">`に、メールアドレスの形式になっていないテキストを入れて送信しようとすると、エラーを表示する。

## 注意点

### 表示はブラウザによって異なる
文言やスタイルを統一したい場合には、JavaScriptを使って自分でバリデーションを作る

### サーバー側でも検証をすること
ブラウザ上でのバリデーションに過ぎず、詳しい人であればrequiredがついていても空欄で送ることができる。
`<input type="email">`を使っていても、メールアドレス以外の文字列を送りつけられる可能性もあり。

## :invalid
CSSの`:invalid`を使えば、エラーが検知された入力欄のスタイルを変えることができる。
これを使うと（送信ボタンを押す前でも）入力中にリアルタイムで反映される。

***


参照元: 
[HTMLのフォーム（form）コンプリートガイド](https://code-kitchen.dev/html/form/)

***

## 用語集

### CGI
**Common Gateway Interface**の略
ホームページでプログラムを動かすための仕組み
特徴
1. 注文が来てからホームページのファイルを作る
2. 注文が来たときにファイルを返す以外の仕事（処理）ができる

### CGIプログラム
 - Common Gateway Interface(コモンゲートウェイインターフェイス)の略
- CGIとはWebサーバーかプログラムを実行するときのルールのこと
- CGIの仕組みによって起動されるプログラムのことを主にCGIプログラムという
- メールフォームの場合は、メールフォームに入力されて送信されたデータを受け取ってあとの応答をCGIプログラムで処理される
- CGIプログラムはRubyやJava、C言語など様々なものを使用して記述できる

### サーブレット
サーブレット（**Java Servlet**）とは、Webサーバ上（バックエンド）で動くプログラムのことで、プログラミング言語のJavaを使って作成されている

### JSP
**Jakarta Server Pages**の略
ホームページのファイル（HTMLファイル）とJavaのプログラムが合体したもの

### URI
**Uniform Resource Identifier**の略
URL(Uniform Resource Locator)とURN(Uniform Resource Name)の総称
- URL＝Web上に存在する住所
- URN＝Web上で対象を特定するための固有ナンバーのようなもの