### How does the internet work?

## インターネットはどうやってつながっていますか？

- **インターネット**: 世界中のコンピュータなどの情報機器を接続する**ネットワーク全体**と、家や会社・学校などの単位ごとに作られた１つ１つのネットワークが、外のネットワークとも繋がるようにした**仕組み**のこと
- **サーバ**: ネットワーク上で情報やサービスを他のコンピュータに提供するコンピュータ
- **クライアント**: サーバから提供された情報やサービスを利用するコンピュータ(パソコンや携帯電話、スマートフォンなど)
- **ルーター**: データを送信する相手を見つけて、そのデータを送ってくれる仕組みを作る役割を持つ。
- **海底ケーブル**: 情報をやりとりするために、海を越えて世界中とつながっている巨大なケーブルのこと。
    - 海底の底にしずめてあり、日本～アメリカ間（9000km）の一番深いところで水深約8000ｍになる。
    - 1秒間でDVD2100枚分以上の情報が送れる。（通信衛星の1000倍以上）
    - 世界の国際通信のほぼ99％を海底ケーブルが担っている。
- **プロトコル**(通信規約): コンピュータが情報をやりとりする際の共通の言語のようなもの。

### インターネットの繋がり方

インターネットの基礎になっているのは**データ通信**(光回線、ADSL回線、ケーブルテレビ回線)で、デジタルデータを音声・電気・光などの信号に変換して別のコンピューターに送信している。

インターネット上には、メールサーバやWebサーバといった**役割の異なる多数のサーバ**が設置されている。
サーバがクライアントからの要求に従って、情報を別のサーバに送ったり持っている情報をクライアントに渡したりすることで、メールを送信したりWebブラウザでホームページを見たりすることができる。

家庭や会社など、ひとまとまりのネットワークの出入口には**ルーター**があり、外部に出るデータをすべて受け取っている。
ルーターは、受け取ったデータに書かれている宛先情報を見て、目的地に近い別のルーターに送り出すということを繰り返して、目的地までデータをリレーのようにして送っていく。

リレーされてきたデータを海外に送るときは**海底ケーブル**を利用する。現在の海底ケーブルには、光ファイバーがたくさん詰まっているので、光の点滅でデータを伝えていくことになる。こうして海外に渡ったデータは、また現地のルーターからルーターへと次々にリレーされ、目的地のコンピューターまでたどり着く。

インターネットでは、コンピュータ同士が通信を行うために**TCP/IP**という標準化されたプロトコルが使われており、この仕組みのおかげでインターネット上で機種が違うコンピュータ同士が通信を行うことができる。




## IPアドレスとは何ですか？

- **IPアドレス**: インターネットで、情報の行き先を管理するためにそれぞれのコンピュータに割り振られている「世界中で通用する住所」のようなもの
    - 例）　*IPアドレス: 198.51.123.1*

IPアドレスは人間にとってもわかりにくいので、ホームページや電子メールを利用する際、相手先のコンピュータを特定するために[ドメイン名](../whatIsDomainName)が使われる。

近年、インターネットに接続する情報機器が増えてきたことで、IPアドレスが足りなくなってきていることが問題になっており、使えるIPアドレスの数を増やすために、IPアドレスの桁数を増やした**IPv6**という規格が徐々に導入されてきている。
例）IPv6方式のIPアドレス `2001:db8:bb5c:8008:2013:a219:2210:8103`



## ポートとは何ですか？

> **ポート**はよく「扉（ドア）」に例えられる。
> **IPアドレス**が住所「家」であれば、ポートは外に出る・外から入る「扉（ドア）」に該当する。

- **ポート**: インターネットの通信を行うのに必要なもの。「**IPアドレス＋ポート番号**」で通信を行っている。
    - WANポート(Wide Area Network Port): **Internet**とも呼ばれる。インターネット側のケーブル（主にプロバイダ側）を接続
    - LANポート(
Local Area Network Port): 家庭や学校のPC（内部側）を接続

### インターネットサーバ側のポート番号
- インターネットサーバ側のポートは固定の番号となっており、常に扉が開いた状態となっている。
- サーバ側のポート番号には意味がある。
- 通常のホームページの表示を行う`http://～`は**80番ポート**が**入り口**となり、常にポートが開かれた状態で待っている。（デフォルトが80番であり変更することも可能）

- ポート番号毎にサーバ側の機能（サービス）は異なる。（下記の一覧参照）
- サーバ側はサービス提供している機能のポート番号のみ開いた状態で待っている。
    例）`https://～`が利用可能なサーバは443番のポートを開いて待っている。
    443番ポートが開いていないサーバに`https://` でアクセスしてもエラーとなる。

### パソコン側のポート番号
- パソコン側（クライアント）のポートはセキュリティ等のため毎回変わり、使用の都度ポート開閉が行われる。
- 自動で割り当てられるポート番号は使用しているOSなどにより異なるが「49152～65535」のなかで使用される。
- OSが動的に割り当てをするため、ポート番号を指定することはできない。
- 通信の長くて数秒だけ動的なポート番号「扉」が開かれるので外部からの不正侵入に耐える仕組みとなっている。


### サーバ側のポート番号分類

| ポート番号 | 使用意図 |
| --- | --- |
| 0～1023 | ウェルノウンポート（通信方式（プロトコル）により登録されている） |
| 1024～49151 | 登録ポート（ソフトウエアにより登録されている） |
| 49152～65535 | ダイナミック・プライベートポート（自由に使える） |

### 代表的なポート番号

| ポート番号 | 通信	| プロトコル | 内容 |
| 20 | TCP | FTP（データ） | FTPによるデータ送信 |
| 21 | TCP | FTP（制御） | 上記FTPの制御 |
| 22 | TCP | SSH | サーバとの暗号化通信 |
| 23 | TCP | Telnet | サーバとの通信 |
| 25 | TCP | SMTP | メール送信 |
| 53 | UDP/TCP | DNS | DNS索引 |
| 80 | TCP | HTTP | ホームページ閲覧 |
| 110 | TCP | POP3 | メール受信 |
| 119 | TCP | NNTP | ニュース用 |
| 123 | UDP | NTP | 時間の取得・調整用 |
| 143 | TCP | IMAP | メール通信 |
| 443 | TCP | HTTPS | ホームページ暗号化閲覧 |
| 587 | TCP | Submission | メール送信 |

最新の詳細情報は、ポート番号を管理しているIANAの一覧を参照。
ポートの情報元; [CMAN](https://www.cman.jp/network/term/port/)